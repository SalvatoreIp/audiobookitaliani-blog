<!-- Cookie Consent JS -->
<script defer src="https://cdn.jsdelivr.net/gh/orestbida/cookieconsent@3.0.1/dist/cookieconsent.umd.js"></script>

<script defer>
window.addEventListener('load', function() {
    
    // Init Cookie Consent
    var cc = initCookieConsent();
    
    cc.run({
        current_lang: 'it',
        autoclear_cookies: true,
        page_scripts: true,
        
        gui_options: {
            consent_modal: {
                layout: 'box wide',
                position: 'bottom center',
                transition: 'slide'
            },
            settings_modal: {
                layout: 'box',
                transition: 'slide'
            }
        },

        onAccept: function(cookie) {
            console.log('Cookie accettati:', cookie);
            
            // Se analytics accettati, carica Google Analytics o altri
            if (cc.allowedCategory('analytics')) {
                // Inserisci qui codice GA se serve
            }
        },

        onChange: function(cookie, changed_categories) {
            console.log('Preferenze cambiate:', changed_categories);
        },

        languages: {
            'it': {
                consent_modal: {
                    title: 'üç™ Utilizziamo i cookie',
                    description: 'Questo sito utilizza cookie tecnici essenziali e, previo consenso, cookie analitici e di affiliazione (Amazon). I cookie ci aiutano a migliorare l\'esperienza utente e a guadagnare commissioni sui prodotti che recensiamo. <a href="/privacy" class="cc__link">Leggi la Privacy Policy</a>',
                    primary_btn: {
                        text: 'Accetta tutti',
                        role: 'accept_all'
                    },
                    secondary_btn: {
                        text: 'Personalizza',
                        role: 'settings'
                    }
                },
                settings_modal: {
                    title: 'Preferenze Cookie',
                    save_settings_btn: 'Salva preferenze',
                    accept_all_btn: 'Accetta tutti',
                    reject_all_btn: 'Rifiuta tutti',
                    close_btn_label: 'Chiudi',
                    cookie_table_headers: [
                        {col1: 'Nome'},
                        {col2: 'Dominio'},
                        {col3: 'Scadenza'},
                        {col4: 'Descrizione'}
                    ],
                    blocks: [
                        {
                            title: 'Utilizzo dei Cookie',
                            description: 'Utilizziamo cookie per garantire le funzionalit√† di base del sito web e per migliorare la tua esperienza online. Puoi scegliere per ogni categoria di attivare/disattivare quando vuoi.'
                        }, {
                            title: 'Cookie Tecnici',
                            description: 'Questi cookie sono essenziali per il corretto funzionamento del sito. Senza questi cookie, il sito non funzionerebbe correttamente.',
                            toggle: {
                                value: 'necessary',
                                enabled: true,
                                readonly: true
                            }
                        }, {
                            title: 'Cookie Analitici',
                            description: 'Questi cookie ci aiutano a capire come i visitatori interagiscono con il sito web raccogliendo e riportando informazioni in forma anonima.',
                            toggle: {
                                value: 'analytics',
                                enabled: false,
                                readonly: false
                            }
                        }, {
                            title: 'Cookie di Affiliazione',
                            description: 'Utilizziamo cookie di affiliazione Amazon per tracciare i clic sui link affiliati e guadagnare una piccola commissione sugli acquisti, senza costi aggiuntivi per te.',
                            toggle: {
                                value: 'marketing',
                                enabled: false,
                                readonly: false
                            }
                        }, {
                            title: 'Maggiori informazioni',
                            description: 'Per qualsiasi domanda relativa alla nostra politica sui cookie e alle tue scelte, contattaci a <a class="cc__link" href="mailto:privacy@audiobookitaliani.com">privacy@audiobookitaliani.com</a> o leggi la nostra <a class="cc__link" href="/privacy">Privacy Policy completa</a>.'
                        }
                    ]
                }
            }
        }
    });
});
</script>
